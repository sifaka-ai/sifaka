[mypy]
python_version = 3.11
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = true
disallow_incomplete_defs = true
check_untyped_defs = true
disallow_untyped_decorators = true
no_implicit_optional = true
strict_optional = true
warn_redundant_casts = true
warn_unused_ignores = true
warn_no_return = true
warn_unreachable = true

# Enable strict protocol checking
disallow_subclassing_any = true
disallow_any_generics = true

# Exclude non-library code
exclude = [
    "tests/",
    "examples/",
    "demos/",
    "benchmarks/",
    "tools/",
]

# Only keep module-specific exceptions that are absolutely necessary
# and plan to remove these over time

# Specific module disables for legitimate cases
[mypy.plugins.pydantic.*]
follow_imports = skip

[mypy.plugins.numpy.*]
follow_imports = skip

[mypy.sifaka.core.registry]
# Registry has circular import mitigation strategies
follow_imports = skip

[mypy.sifaka.chain.state]
# State has circular import mitigation strategies
follow_imports = skip

[mypy.sifaka.chain.plugins]
# Plugin system has circular import mitigation strategies
follow_imports = skip

[mypy.sifaka.core.initialize_registry]
# Registry initialization has circular import mitigation strategies
follow_imports = skip

[mypy.sifaka.classifiers.errors]
# Error handling has circular import mitigation strategies
follow_imports = skip
